<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FaceGuard: Video Anonymizer</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: #0a1f12;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #10e956;
        }

        .container {
            background: rgba(16, 233, 86, 0.1);
            border: 2px solid #10e956;
            border-radius: 15px;
            padding: 30px;
            width: 100%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 0 20px rgba(16, 233, 86, 0.2);
        }

        .upload-box {
            border: 3px dashed #10e956;
            border-radius: 10px;
            padding: 40px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-box:hover {
            background: rgba(16, 233, 86, 0.1);
            border-color: #2bff6c;
        }

        #fileInput {
            display: none;
        }

        .btn {
            background: #10e956;
            color: #0a1f12;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #2bff6c;
            transform: scale(1.05);
        }

        #progressBar {
            width: 0%;
            height: 5px;
            background: #10e956;
            margin-top: 10px;
            transition: width 0.5s;
        }

        #status {
            margin-top: 15px;
            color: #2bff6c;
        }

        .preview {
            max-width: 100%;
            margin-top: 20px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>FaceGuard: Video Anonymizer</h1>
        
        <div class="upload-box" id="dropZone">
            <input type="file" id="fileInput" accept="video/*">
            <p>Drag & Drop Video or Click to Upload</p>
        </div>

        <button id="processBtn" class="btn" disabled>Process Video</button>
        <button id="downloadBtn" class="btn" disabled>Download Anonymized Video</button>

        <video id="previewVideo" class="preview" controls></video>
        <div id="progressBar"></div>
        <div id="status"></div>
    </div>

    <script>
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const processBtn = document.getElementById('processBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const previewVideo = document.getElementById('previewVideo');
        const progressBar = document.getElementById('progressBar');
        const statusText = document.getElementById('status');

        let selectedFile = null;
        let processedBlob = null;

        // Drag and Drop Handlers
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            dropZone.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, unhighlight, false);
        });

        function highlight() {
            dropZone.style.borderColor = '#2bff6c';
        }

        function unhighlight() {
            dropZone.style.borderColor = '#10e956';
        }

        // File Selection Handlers
        dropZone.addEventListener('drop', handleDrop, false);
        dropZone.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', handleFiles);

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            handleFileSelection(files[0]);
        }

        function handleFiles() {
            handleFileSelection(fileInput.files[0]);
        }

        function handleFileSelection(file) {
            if (!file || !file.type.startsWith('video/')) {
                alert('Please select a valid video file.');
                return;
            }

            selectedFile = file;
            processBtn.disabled = false;

            // Preview Video
            const reader = new FileReader();
            reader.onload = function(e) {
                previewVideo.src = e.target.result;
                previewVideo.style.display = 'block';
            };
            reader.readAsDataURL(file);

            updateStatus(`File Selected: ${file.name}`);
        }

        // Process Video
        processBtn.addEventListener('click', processVideo);

        async function processVideo() {
            if (!selectedFile) {
                alert('Please select a video first.');
                return;
            }

            updateStatus('Processing Video...');
            processBtn.disabled = true;
            progressBar.style.width = '0%';

            try {
                // Simulate processing
                await new Promise(resolve => {
                    let progress = 0;
                    const interval = setInterval(() => {
                        progress += 10;
                        progressBar.style.width = `${progress}%`;
                        
                        if (progress >= 100) {
                            clearInterval(interval);
                            resolve();
                        }
                    }, 200);
                });

                // Create a mock processed blob
                processedBlob = new Blob([selectedFile], { type: 'video/mp4' });
                
                updateStatus('Video Processed Successfully!');
                downloadBtn.disabled = false;
            } catch (error) {
                updateStatus('Processing Failed: ' + error.message);
                processBtn.disabled = false;
            }
        }

        // Download Processed Video
        downloadBtn.addEventListener('click', downloadVideo);

        function downloadVideo() {
            if (!processedBlob) {
                alert('No processed video available.');
                return;
            }

            const url = URL.createObjectURL(processedBlob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'anonymized-video.mp4';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function updateStatus(message) {
            statusText.textContent = message;
        }
    </script>
</body>
</html>
